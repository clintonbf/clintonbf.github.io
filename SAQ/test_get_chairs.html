<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A test for DB reading chairs</title>

    <!-- init firebase mega thing-->
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
    <!-- init firestore -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
    <!-- init SAQ firebase -->
    <script src="firebase_config.js"></script>
    <!-- init SAQ objects -->
    <script src="SAQ_objects.js"></script>
</head>
    <body>
        <script>
            // INIT firestore
            var the_db = firebase.firestore();

            function get_single_chair(chair_id) {
                let db_ref = the_db.collection("Chairs").doc(chair_id);

                db_ref.get().then(function(doc){
                    if (doc.exists){
                        // OUTPUT record properties to console
                        for (let propName in doc.data()){
                            console.log("Data item: " + propName);
                        }

                        // OUTPUT the chair name
                        document.getElementById("watch_this").innerHTML = doc.data().name;
                }
                else {
                    console.log("Didn't work");
                    }
                }).catch(function(error) {
                    console.log("Threw error " + error);
                });
            }

            // get_single_chair("chair_0");

            //DB calls to auto-populate HTML
            function get_all_chairs() {
                let db_ref = the_db.collection("Chairs");

                db_ref.get().then(function(docs) {
                    docs.forEach(function(doc) {
                        //Create a <p> to hold the Chair and add it to the DOM
                        let p_tag = document.createElement("p");
                        document.body.appendChild(p_tag);

                        //Create a text node to to hold the chair name and append that to the newly-created <p>
                        let node = document.createTextNode(doc.data().name);
                        p_tag.appendChild(node)
                    })
                })
                .catch(function(error) {
                    console.log("Threw error " + error);
                });
            }

           get_all_chairs();

</script>


</body>
</html>